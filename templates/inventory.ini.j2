[all]
{% for node in control_plane_nodes %}
{{ node.name }} ansible_host={{ node.ansible_host }} ansible_user={{ node.ansible_user | default(default_ansible_user) }} ansible_ssh_private_key_file={{ ssh_key_path }}{% if node.ansible_become is defined %} ansible_become={{ node.ansible_become }}{% endif %}{% if node.ansible_become_method is defined %} ansible_become_method={{ node.ansible_become_method }}{% endif %}{% if node.ansible_become_user is defined %} ansible_become_user={{ node.ansible_become_user }}{% endif %}{% if node.private_ip is defined %} ip={{ node.private_ip }}{% endif %}
{% endfor %}
{% for node in worker_nodes %}
{{ node.name }} ansible_host={{ node.ansible_host }} ansible_user={{ node.ansible_user | default(default_ansible_user) }} ansible_ssh_private_key_file={{ ssh_key_path }}{% if node.ansible_become is defined %} ansible_become={{ node.ansible_become }}{% endif %}{% if node.ansible_become_method is defined %} ansible_become_method={{ node.ansible_become_method }}{% endif %}{% if node.ansible_become_user is defined %} ansible_become_user={{ node.ansible_become_user }}{% endif %}{% if node.private_ip is defined %} ip={{ node.private_ip }}{% endif %}
{% endfor %}

[kube_control_plane]
{% for node in control_plane_nodes %}
{{ node.name }}
{% endfor %}

[etcd]
{% for node in control_plane_nodes %}
{{ node.name }}
{% endfor %}

[kube_node]
{% for node in control_plane_nodes %}
{{ node.name }}
{% endfor %}
{% for node in worker_nodes %}
{{ node.name }}
{% endfor %}

[k8s_cluster:children]
kube_control_plane
kube_node

[calico_rr]

[k8s_cluster:vars]
# Network plugin (calico, flannel, weave or cilium)
kube_network_plugin=calico

# Container runtime (containerd, crio)
container_manager=containerd

# DNS mode (coredns, nodelocaldns)
dns_mode=coredns

# Default privilege escalation settings (can be overridden per host)
ansible_become=true
ansible_become_method=sudo
ansible_become_user=root
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' 