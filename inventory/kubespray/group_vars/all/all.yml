---
###############################################################################
# KUBESPRAY GROUP VARIABLES - DYNAMICALLY GENERATED FROM user_input.yml
# This file is automatically generated by setup_kubernetes.sh
###############################################################################

## Directory where the binaries will be installed
bin_dir: /usr/local/bin

## Cluster Configuration
cluster_name: cluster.local

## Container Runtime Configuration
container_manager: containerd

## Network Configuration
kube_network_plugin: calico
kube_service_addresses: 10.233.0.0/18
kube_pods_subnet: 10.233.64.0/18
kube_network_node_prefix: 24

## DNS Configuration
dns_mode: coredns
resolvconf_mode: host_resolvconf

## API Server Configuration
# Certificate SAN (Subject Alternative Names) Configuration
# CRITICAL: This fixes the "x509: certificate is valid for ... not 0.0.0.0" error
# Certificate SAN configuration moved to group_vars/k8s_cluster/k8s-cluster.yml

## Load Balancer Configuration
# Localhost Load Balancer Configuration (Single or Multi-Master)
loadbalancer_apiserver_localhost: true
loadbalancer_apiserver_type: haproxy

# Load balancer configuration - listens on client-facing port
# Load balancer port configuration
loadbalancer_apiserver_port: 6443
# Client connection address (0.0.0.0 included in certificate)
loadbalancer_apiserver_address: "0.0.0.0"
# HAProxy bind configuration (can bind to 0.0.0.0 for all interfaces)
haproxy_bind_address: "0.0.0.0"
# API Server - binds to backend port to avoid conflict with load balancer
kube_apiserver_port: 6444
kube_apiserver_bind_address: "0.0.0.0"

# Backend configuration for load balancer
haproxy_kube_apiserver_port: 6444
# Health check configuration
loadbalancer_apiserver_healthcheck_port: 8081

# Performance and resource settings
loadbalancer_apiserver_keepalive_timeout: 5m
loadbalancer_apiserver_memory_requests: 32M
loadbalancer_apiserver_cpu_requests: 25m

# Load balancer pod naming
loadbalancer_apiserver_pod_name: haproxy


## etcd Configuration
etcd_deployment_type: kubeadm
# etcd Cluster Configuration
etcd_heartbeat_interval: 100
etcd_election_timeout: 1000
etcd_quota_backend_bytes: 2147483648
etcd_compaction_retention: 8
etcd_max_request_bytes: 1572864
etcd_metrics: basic
# etcd Security Configuration
etcd_peer_auto_tls: false
etcd_client_cert_auth: true
etcd_peer_cert_auth: true
# etcd Performance Configuration
etcd_max_snapshots: 5
etcd_max_wals: 5
etcd_snapshot_count: 100000


## NVIDIA Runtime Configuration
nvidia_accelerator_enabled: true
nvidia_driver_install_container: true
nvidia_container_runtime_package_architecture: amd64


## Security Configuration
rbac_enabled: true
kube_encrypt_secret_data: false
kube_api_anonymous_auth: true

## Node Configuration
kubelet_max_pods: 256
kube_read_only_port: 0

## Certificate Configuration
# TLS configuration for kubelet
tls_min_version: "VersionTLS12"

## Audit Configuration
kubernetes_audit: false

## Addons Configuration (Disabled by default - managed separately)
ingress_nginx_enabled: false
metallb_enabled: false
dashboard_enabled: false

## Firewall Configuration


## Additional Kubespray Variables
 